---
id: lg3o6
title: Core Model Architecture
file_version: 1.1.2
app_version: 1.4.4
---

# Overview

Core Model is a rename of old User Model. The first User Model contain duplicate 'name' fields, as it needs a 'name' field for session and 'firstname and lastname' for table. It was a bad idea for a Model, so we redesigned it back to function for table only, also change its name to more conventional name, Core Model.

## Migration

Migration file helps developer to design database schema in simpler way. The file located at `ðŸ“„ database/migrations/2023_03_06_221638_create_cores_table.php`

## Factory

Factory helps seeding table with dummy data. The file located at `ðŸ“„ database/factories/CoreFactory.php`

<br/>

Inside the class, we declare which model is associated with this factory class
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ database/factories/CoreFactory.php
```hack
11     class CoreFactory extends Factory
12     {
13         protected $model = Core::class;
```

<br/>

Then, we use faker helper functions to generate dummy data. We can seed the model using tinker in terminal
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ database/factories/CoreFactory.php
```hack
19         public function definition(): array
20         {
21             static $incrementing_number = 1;
22             return [
23                 'user_id'=>$incrementing_number++,
24                 'first_name' => fake()->firstName(),
25                 'last_name' => fake()->lastName(),
26                 'ppi' => fake()->numberBetween([1],[100]),
27                 'batch' => fake()->firstName(),
28     
29             ];
30         }
```

<br/>

# Model

The model is located at `ðŸ“„ app/Models/Core.php`. It is the Eloquent ORM of Cores table.

<br/>

<div align="center"><img src="https://firebasestorage.googleapis.com/v0/b/swimmio-content/o/repositories%2FZ2l0aHViJTNBJTNBaW1wcm9mZGJ2dWUlM0ElM0FtZGF6cmlu%2Fd6c08508-1758-40a6-8642-a9d200b4fd42.png?alt=media&token=bc5e7e32-f763-4b5e-b988-bc2d8a216b22" style="width:'100%'"/></div>

<br/>

<br/>

# Controller

The controller is where the application logic is written. The file is located at `ðŸ“„ app/Http/Controllers/CoreController.php`

<br/>

Since we are using Inertia, we need to import these two packages
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ app/Http/Controllers/CoreController.php
```hack
7      use Inertia\Inertia;
8      use Inertia\Response;
```

<br/>

## Index

Index function is called to view all the Core Model objects

<br/>

<div align="center"><img src="https://firebasestorage.googleapis.com/v0/b/swimmio-content/o/repositories%2FZ2l0aHViJTNBJTNBaW1wcm9mZGJ2dWUlM0ElM0FtZGF6cmlu%2F12a093ae-9ec3-4b30-9e12-7691be8de54f.png?alt=media&token=47a06a52-291b-44e5-a259-c4830c6fd1a7" style="width:'100%'"/></div>

<br/>

Line 17-22<br/>
We assign cores as Core Model objects. We use **pagination** method in Laravel to paginate a number of objects per page, but we filter what data will be passed into the client using **through** method

Line 26-27<br/>
return the data at Welcome component page with parameter Core objects
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ app/Http/Controllers/CoreController.php
```hack
15         public function index(): Response
16         {
17             $cores = Core::paginate(10)->through(fn($core) => [
18                 'id' => $core->id,
19                 'first_name' => $core->first_name,
20                 'last_name' => $core->last_name,
21                 'ppi' => $core->ppi,
22                 'batch' => $core->batch,
23             ]);
24     
25     
26             return Inertia::render('Welcome',[
27                 'cores'=>$cores,
28             ]);
29         }
```

<br/>

# Route

<br/>

We use get requests at '/' url and use CoreController class with index method
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ routes/web.php
```hack
19     Route::get('/',[CoreController::class,'index']);
```

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

<br/>

This file was generated by Swimm. [Click here to view it in the app](/repos/Z2l0aHViJTNBJTNBaW1wcm9mZGJ2dWUlM0ElM0FtZGF6cmlu/docs/lg3o6).
